# C++ 11 lambda表达式



#### 前言

使用STL时，往往会大量用到函数对象，为此要编写很多函数对象类。而有的函数对象类只用定义一个对象，而且这个对象也只使用一次，那编写这样一个函数对象就很浪费了。而且有时这定义函数对象类的地方和使用函数对象的地方很远，不方便查看。
那对于使用一次的函数对象类，能不能直接在使用它的地方定义呢？lambda就是为解决这个问题而提出的（其实在python、C#等中匿名函数已存在很久了）。使用Lambda表达式可以减少程序中函数对象类的对象，使程序更加优雅。



定义：

```
[外部变量访问方式说明符] (参数表) -> 返回值类型
{
   语句块
}

```

“外部变量访问方式说明符”可以是**=**或**&**，表示{}中用到的、定义在{}外面的变量在{}中是否允许被改变。= 表示不允许，&表示允许。当然，在{}中也可以不使用定义在外面的变量。“->返回值类型”可以省略
lambad可访问作用域内的任何动态变量，要捕获要使用的变量，可将其名称放在中括号内。如果只指定了变量名，如[z],将按值访问变量；如果在名称前加上&,如[&count]，将按引用访问变量。[&]能够按引用访问所有动态变量，而[=]按值访问所有动态变量





##### 匿名函数和函数对比

```
[](int x){return x % 3 == 0;}

bool f3(int x){return x % 3 == 0;}
```

1、使用[]代替了函数名（匿名函数的由来）
2、没有声明返回类型
返回类型相当于使用decltype根据返回值推断得到。仅当lambda表达式完全由一条返回语句组成时，自动类型推断才管用，否则需要使用新增的返回类型后置语法。



引入lambda表达式目的：能够将类似于函数表达式用作接收函数指针或者函数符的函数参数。